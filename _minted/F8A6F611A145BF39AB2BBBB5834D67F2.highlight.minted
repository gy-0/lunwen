\begin{MintedVerbatim}[commandchars=\\\{\}]
\PYG{k}{@implementation} \PYG{n+nc}{SLAPIClient}

\PYG{p}{+} \PYG{p}{(}\PYG{k+kt}{void}\PYG{p}{)}\PYG{n+nf}{optimizeTextForImageGeneration:}\PYG{p}{(}\PYG{n+nb+bp}{NSString}\PYG{+w}{ }\PYG{o}{*}\PYG{p}{)}\PYG{n+nv}{text}\PYG{+w}{ }\PYG{n+nf}{completion:}\PYG{p}{(}\PYG{k+kt}{void}\PYG{+w}{ }\PYG{p}{(}\PYG{o}{\PYGZca{}}\PYG{p}{)(}\PYG{n+nb+bp}{NSString}\PYG{+w}{ }\PYG{o}{*}\PYG{p}{,}\PYG{+w}{ }\PYG{n+nb+bp}{NSError}\PYG{+w}{ }\PYG{o}{*}\PYG{p}{))}\PYG{n+nv}{completion}\PYG{+w}{ }\PYG{p}{\PYGZob{}}
\PYG{+w}{    }\PYG{c+c1}{// Prepare the endpoint URL for Ollama API}
\PYG{+w}{    }\PYG{n+nb+bp}{NSURL}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{url}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{p}{[}\PYG{n+nb+bp}{NSURL}\PYG{+w}{ }\PYG{n}{URLWithString}\PYG{o}{:}\PYG{l+s}{@\PYGZdq{}http://localhost:11434/api/chat\PYGZdq{}}\PYG{p}{];}

\PYG{+w}{    }\PYG{c+c1}{// Create request}
\PYG{+w}{    }\PYG{n+nb+bp}{NSMutableURLRequest}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{request}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{p}{[[}\PYG{n+nb+bp}{NSMutableURLRequest}\PYG{+w}{ }\PYG{n}{alloc}\PYG{p}{]}\PYG{+w}{ }\PYG{n}{initWithURL}\PYG{o}{:}\PYG{n}{url}\PYG{p}{];}
\PYG{+w}{    }\PYG{p}{[}\PYG{n}{request}\PYG{+w}{ }\PYG{n}{setHTTPMethod}\PYG{o}{:}\PYG{l+s}{@\PYGZdq{}POST\PYGZdq{}}\PYG{p}{];}

\PYG{+w}{    }\PYG{c+c1}{// Set request headers}
\PYG{+w}{    }\PYG{p}{[}\PYG{n}{request}\PYG{+w}{ }\PYG{n}{setValue}\PYG{o}{:}\PYG{l+s}{@\PYGZdq{}application/json\PYGZdq{}}\PYG{+w}{ }\PYG{n}{forHTTPHeaderField}\PYG{o}{:}\PYG{l+s}{@\PYGZdq{}Content\PYGZhy{}Type\PYGZdq{}}\PYG{p}{];}

\PYG{+w}{    }\PYG{c+c1}{// Prepare request body with specialized prompt for image generation optimization}
\PYG{+w}{    }\PYG{n+nb+bp}{NSString}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{engineeringPrompt}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{l+s}{@\PYGZdq{}Transform the following text into an optimized prompt for image generation. Enhance visual descriptions, add stylistic elements, and ensure detailed attributes that would create a compelling image. Keep the semantic meaning of the original text but make it visually descriptive. Respond with only the optimized prompt without explanation.\PYGZdq{}}\PYG{p}{;}

\PYG{+w}{    }\PYG{n+nb+bp}{NSDictionary}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{requestBody}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{l}{@\PYGZob{}}\PYG{+w}{Â }
\PYG{+w}{        }\PYG{l+s}{@\PYGZdq{}model\PYGZdq{}}\PYG{o}{:}\PYG{+w}{ }\PYG{l+s}{@\PYGZdq{}deepseek\PYGZhy{}r1:32b\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{        }\PYG{l+s}{@\PYGZdq{}messages\PYGZdq{}}\PYG{o}{:}\PYG{+w}{ }\PYG{l}{@[}
\PYG{+w}{            }\PYG{l}{@\PYGZob{}}
\PYG{+w}{                }\PYG{l+s}{@\PYGZdq{}role\PYGZdq{}}\PYG{o}{:}\PYG{+w}{ }\PYG{l+s}{@\PYGZdq{}user\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{                }\PYG{l+s}{@\PYGZdq{}content\PYGZdq{}}\PYG{o}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{n+nb+bp}{NSString}\PYG{+w}{ }\PYG{n}{stringWithFormat}\PYG{o}{:}\PYG{l+s}{@\PYGZdq{}\PYGZpc{}@}\PYG{l+s+se}{\PYGZbs{}n\PYGZbs{}n}\PYG{l+s}{Original text: \PYGZpc{}@\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{n}{engineeringPrompt}\PYG{p}{,}\PYG{+w}{ }\PYG{n}{text}\PYG{p}{]}
\PYG{+w}{            }\PYG{l}{\PYGZcb{}}
\PYG{+w}{        }\PYG{l}{]}\PYG{p}{,}
\PYG{+w}{        }\PYG{l+s}{@\PYGZdq{}temperature\PYGZdq{}}\PYG{o}{:}\PYG{+w}{ }\PYG{l+m+mf}{@0.6}
\PYG{+w}{    }\PYG{l}{\PYGZcb{}}\PYG{p}{;}

\PYG{+w}{    }\PYG{c+c1}{// Serialize and set body}
\PYG{+w}{    }\PYG{n+nb+bp}{NSError}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{error}\PYG{p}{;}
\PYG{+w}{    }\PYG{n+nb+bp}{NSData}\PYG{+w}{ }\PYG{o}{*}\PYG{n}{jsonData}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{p}{[}\PYG{n+nb+bp}{NSJSONSerialization}\PYG{+w}{ }\PYG{n}{dataWithJSONObject}\PYG{o}{:}\PYG{n}{requestBody}\PYG{+w}{ }\PYG{n}{options}\PYG{o}{:}\PYG{l+m+mi}{0}\PYG{+w}{ }\PYG{n}{error}\PYG{o}{:\PYGZam{}}\PYG{n}{error}\PYG{p}{];}

\PYG{+w}{    }\PYG{c+c1}{// Error handling and response processing}
\PYG{+w}{    }\PYG{c+c1}{// ... implementation details}
\PYG{p}{\PYGZcb{}}
\end{MintedVerbatim}
